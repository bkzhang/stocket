<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Stocket</title>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>
    <script type="text/javascript" src="http://localhost:8446/socket.io/socket.io.js"></script>
  </head> 

  <body>
    <div id="quotes"></div>
  </body>

  <script type="text/javascript">
    'use strict'

    $(document).ready(() => {
      const ticker = location.hash.substr(1)
      const socket = io.connect('http://localhost:8446')

      socket.emit('ticker', ticker)
      socket.on(ticker, (res) => {
        let data = $('<pre>' + res + '</pre><hr />')
        $('#quotes').append(data)
        $('html, body').animate({ scrollTop: $(document).height() }, 100)
        $(data).show('slide', { direction: 'up' }, 300)
        $(data).effect('highlight', {}, 1500)
      })

      $(window).on('hashchange', () => {
        let ticker = location.hash.substr(1)
        socket.emit('ticker', ticker)
      })
    })
  </script>
</html>
